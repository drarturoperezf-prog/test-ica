<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Test ICA 췅 Riesgo cardiometab칩lico</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#f5f7fb; --text:#0f172a; --muted:#475569;
  --card:#fff; --border:#e2e8f0;
  --green:#22c55e; --amber:#f59e0b; --red:#ef4444;
  --shadow:0 14px 30px rgba(2,6,23,.08);
}
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;background:var(--bg);}
.screen{display:none;max-width:520px;margin:auto;min-height:100vh;padding:24px;align-content:center}
.screen.active{display:block}
.card{background:var(--card);border-radius:18px;padding:20px;box-shadow:var(--shadow)}
h1{font-size:34px;margin:0 0 14px}
p{color:var(--muted)}
input{width:100%;padding:14px;margin-top:14px;border-radius:12px;border:1px solid var(--border);font-size:18px}
.btn{width:100%;padding:16px;margin-top:18px;border-radius:14px;font-weight:800;font-size:18px;border:0;cursor:pointer}
.primary{background:#111827;color:#fff}
.secondary{background:#fff;border:1px solid var(--border)}
.error{display:none;color:#b91c1c;font-weight:700;margin-top:12px}
.result.low{background:#ecfdf3;border-left:6px solid var(--green)}
.result.moderate{background:#fffbeb;border-left:6px solid var(--amber)}
.result.high{background:#fef2f2;border-left:6px solid var(--red)}
</style>
</head>

<body>

<div class="screen active" id="s1">
<div class="card">
<h1>쯊u grasa abdominal est치 poniendo en riesgo tu salud?</h1>
<p>Test r치pido basado en el 칤ndice cintura-altura (ICA).</p>
<button class="btn primary" onclick="go(2)">Empezar el test</button>
</div></div>

<div class="screen" id="s2">
<div class="card">
<h1>Per칤metro de cintura (cm)</h1>
<input id="cintura" type="number">
<div class="error" id="err2">Valor incorrecto</div>
<button class="btn primary" onclick="nextCintura()">Siguiente</button>
</div></div>

<div class="screen" id="s3">
<div class="card">
<h1>Altura (cm)</h1>
<input id="altura" type="number">
<div class="error" id="err3">Valor incorrecto</div>
<button class="btn primary" onclick="nextAltura()">Siguiente</button>
</div></div>

<div class="screen" id="s4">
<div class="card">
<h1>쯊e cuesta perder grasa abdominal?</h1>
<button class="btn primary" onclick="answer(1)">S칤</button>
<button class="btn secondary" onclick="answer(0)">No</button>
</div></div>

<div class="screen" id="s5">
<div class="card">
<h1>쮿as recuperado peso tras adelgazar?</h1>
<button class="btn primary" onclick="answer(1)">S칤</button>
<button class="btn secondary" onclick="answer(0)">No</button>
</div></div>

<div class="screen" id="s6">
<div class="card">
<h1>쯊ensi칩n, az칰car o colesterol altos?</h1>
<button class="btn primary" onclick="answer(1)">S칤</button>
<button class="btn secondary" onclick="answer(0)">No</button>
</div></div>

<div class="screen" id="s7">
<div class="card">
<h1>Antes de ver tu resultado</h1>
<input id="leadNombre" placeholder="Nombre">
<input id="leadEmail" placeholder="Email">
<input id="leadTel" placeholder="Tel칠fono">
<div class="error" id="err7">Datos incorrectos</div>
<button class="btn primary" onclick="submitLeadsAndResult()">Ver mi resultado</button>
</div></div>

<div class="screen" id="s8">
<div class="card">
<h1 id="resultTitle"></h1>
<p id="resultText"></p>
<a class="btn primary" href="https://www.instagram.com/dr.arturoperezf/" target="_blank">Escribirme por Instagram</a>
</div></div>

<script>
const WEBAPP_URL="https://script.google.com/macros/s/AKfycby2-U6fvjNmw7ojHatAQUSVuidKX5TcAN0ivozgIN5MD3w_YnJnQxFcHlP2l9Jh-4B62Q/exec";
let clinicalScore=0,answers=0;

function go(n){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById('s'+n).classList.add('active');}

function nextCintura(){
let v=+cintura.value;if(v<50||v>200)return err2.style.display='block';go(3);
}
function nextAltura(){
let v=+altura.value;if(v<120||v>230)return err3.style.display='block';go(4);
}
function answer(v){clinicalScore+=v;answers++;answers<3?go(answers+3):go(7);}

function submitLeadsAndResult(){
let n=leadNombre.value.trim(),e=leadEmail.value.trim(),t=leadTel.value.trim();
if(n.length<2||!e.includes('@')||t.length<7)return err7.style.display='block';

let ica=(+cintura.value/+altura.value).toFixed(2);
let riesgo=ica<0.5&&clinicalScore==0?'low':ica<0.6||clinicalScore<=1?'moderate':'high';

fetch(WEBAPP_URL,{
method:'POST',
mode:'no-cors',
headers:{'Content-Type':'application/x-www-form-urlencoded'},
body:new URLSearchParams({nombre:n,email:e,telefono:t,ica,riesgo})
});

resultTitle.innerText=riesgo=='low'?'游릭 Resultado: Riesgo bajo':riesgo=='moderate'?'游 Resultado: Alerta metab칩lica':'游댮 Resultado: Riesgo elevado';
resultText.innerText="ICA: "+ica;
go(8);
}
</script>

</body>
</html>
