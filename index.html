<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Test ICA · Riesgo cardiometabólico</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      --bg:#f5f7fb;
      --text:#0f172a;
      --muted:#475569;
      --card:#ffffff;
      --border:#e2e8f0;

      --green:#22c55e;
      --amber:#f59e0b;
      --red:#ef4444;

      --shadow: 0 14px 30px rgba(2,6,23,.08);
    }

    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
      margin:0;
    }

    .screen{display:none;padding:24px;max-width:520px;margin:0 auto;min-height:100vh;align-content:center}
    .screen.active{display:block}
    .card{background:#fff;border-radius:18px;padding:20px;box-shadow:var(--shadow)}

    h1{font-size:34px;margin:0 0 14px}
    p{color:var(--muted)}

    input{width:100%;padding:14px;font-size:18px;border-radius:12px;border:1px solid var(--border);margin-top:14px}

    .btn{width:100%;margin-top:18px;padding:16px;font-size:18px;font-weight:800;border-radius:14px;border:0;cursor:pointer}
    .btn.primary{background:linear-gradient(135deg,#111827,#334155);color:#fff}
    .btn.secondary{background:#fff;border:1px solid var(--border)}

    .result.low{background:#ecfdf3;border-left:7px solid var(--green)}
    .result.moderate{background:#fffbeb;border-left:7px solid var(--amber)}
    .result.high{background:#fef2f2;border-left:7px solid var(--red)}

    .badge{display:inline-block;padding:8px 12px;border-radius:999px;font-weight:800}
    .badge.low{background:#e7f6ed}
    .badge.moderate{background:#fff4d6}
    .badge.high{background:#fde3e3}

    .semaforo{display:flex;gap:10px;justify-content:center}
    .luz{width:18px;height:18px;border-radius:50%;background:#ddd;opacity:.3}
    .luz.on{opacity:1}
    .verde.on{background:var(--green)}
    .ambar.on{background:var(--amber)}
    .roja.on{background:var(--red)}

    .riskbar{height:10px;background:#e5e7eb;border-radius:999px;margin:10px 0}
    .riskfill{height:100%;background:var(--green);width:33%}
    .riskfill.moderate{background:var(--amber);width:66%}
    .riskfill.high{background:var(--red);width:100%}

    .ica-pill{display:inline-block;padding:10px 12px;border-radius:999px;border:1px solid var(--border);font-weight:800}
    .error{color:#b91c1c;font-weight:700;display:none}
  </style>
</head>

<body>

<!-- PANTALLAS (idénticas a las tuyas) -->
<!-- NO SE TOCA NADA -->

<!-- … [todas las pantallas 1 a 8 EXACTAS como las tuyas] … -->

<script>
  let clinicalScore = 0;
  let answersCount = 0;

  const WEBAPP_URL = "https://script.google.com/macros/s/AKfycby2-U6fvjNmw7ojHatAQUSVuidKX5TcAN0ivozgIN5MD3w_YnJnQxFcHlP2l9Jh-4B62Q/exec";

  function submitLeadsAndResult(){
    const nombre = document.getElementById('leadNombre').value.trim();
    const email = document.getElementById('leadEmail').value.trim();
    const tel = document.getElementById('leadTel').value.trim();

    const ok = nombre.length>=2 && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email) && tel.length>=7;
    document.getElementById('err7').style.display = ok ? 'none' : 'block';
    if(!ok) return;

    const cintura = parseFloat(document.getElementById('cintura').value);
    const altura  = parseFloat(document.getElementById('altura').value);
    const ica = cintura / altura;

    let riesgo = "low";
    if (ica >= 0.6 || clinicalScore >= 2) riesgo = "high";
    else if (ica >= 0.5) riesgo = "moderate";

    const payload = new URLSearchParams({
      nombre,
      email,
      telefono: tel,
      ica: ica.toFixed(2),
      riesgo
    });

    fetch(WEBAPP_URL,{
      method:"POST",
      mode:"no-cors",
      headers:{"Content-Type":"application/x-www-form-urlencoded"},
      body:payload.toString()
    });

    calculateResult();
  }
</script>

</body>
</html>
